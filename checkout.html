<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - LocalConnect24x7</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Global Styles - Modern & Premium */
        :root {
            --primary: #4F46E5; /* Indigo 600 */
            --primary-dark: #4338CA; /* Indigo 700 */
            --secondary: #F59E0B; /* Amber 500 */
            --dark: #111827;
            --light: #F9FAFB;
            --text-color: #374151;
            --success: #10B981;
            --danger: #EF4444;
            --border-color: #E5E7EB;
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--light); color: var(--text-color); line-height: 1.6; display: flex; flex-direction: column; min-height: 100vh; }
        .container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 20px; }

        /* Header */
        header { background-color: white; padding: 1rem 0; border-bottom: 1px solid var(--border-color); box-shadow: var(--shadow-md); }
        .header-container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.75rem; font-weight: 800; color: var(--dark); text-decoration: none; }
        .logo span { color: var(--primary); }

        /* Main Content */
        main { flex-grow: 1; padding: 3rem 0; }
        .checkout-layout { display: grid; grid-template-columns: 1.5fr 1fr; gap: 2rem; align-items: flex-start; }
        
        /* Payment Options Section */
        .payment-section, .summary-section { background: white; border-radius: 12px; box-shadow: var(--shadow-md); border: 1px solid var(--border-color); }
        .payment-section { padding: 2rem; }
        .payment-methods { border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; }
        .payment-method { padding: 1rem; cursor: pointer; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 1rem; font-weight: 600; }
        .payment-method:last-child { border-bottom: none; }
        .payment-method.active { background-color: #EEF2FF; color: var(--primary); }
        .payment-method i { width: 24px; text-align: center; }
        .payment-details { padding: 1.5rem; border-top: 1px solid var(--border-color); }
        .payment-details .form-group { margin-bottom: 1rem; }
        .payment-details label { display: block; font-weight: 500; margin-bottom: 0.5rem; }
        .payment-details input { width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; }
        .card-details-row { display: flex; gap: 1rem; }

        /* Order Summary Section */
        .summary-section { padding: 2rem; position: sticky; top: 110px; }
        .summary-section h2, .payment-section h2 { font-size: 1.5rem; font-weight: 700; color: var(--dark); margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; }
        .summary-item { display: flex; justify-content: space-between; margin-bottom: 1rem; }
        .summary-total { display: flex; justify-content: space-between; font-size: 1.25rem; font-weight: 700; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color); }
        
        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; }
        .btn-primary { background: var(--primary); color: white; width: 100%; margin-top: 1.5rem; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-primary:disabled { background: #9CA3AF; cursor: not-allowed; }

        /* Footer */
        .site-footer { background-color: var(--dark); color: #D1D5DB; padding: 40px 0; }
        .copyright { text-align: center; }

        /* Responsive */
        @media (max-width: 1024px) {
            .checkout-layout { grid-template-columns: 1fr; }
            .summary-section { position: static; margin-top: 2rem; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">LocalConnect<span>24x7</span></a>
            <div class="text-lg font-semibold">Secure Checkout</div>
        </div>
    </header>

    <main>
        <div class="container checkout-layout">
            <!-- Left Side: Payment Options -->
            <section class="payment-section">
                <h2>Choose Payment Method</h2>
                <div class="payment-methods">
                    <div class="payment-method active" data-method="upi">
                        <i class="fas fa-mobile-alt"></i> UPI
                    </div>
                    <div class="payment-method" data-method="card">
                        <i class="fas fa-credit-card"></i> Credit / Debit Card
                    </div>
                    <div class="payment-method" data-method="cod">
                        <i class="fas fa-money-bill-wave"></i> Cash on Delivery
                    </div>
                </div>

                <!-- Payment Details Panes -->
                <div id="payment-details-container">
                    <div id="upi-details" class="payment-details">
                        <div class="form-group">
                            <label for="upi-id">Enter UPI ID</label>
                            <input type="text" id="upi-id" placeholder="yourname@bank">
                        </div>
                        <p class="text-center my-4">OR</p>
                        <div class="text-center">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=example@upi" alt="QR Code" class="mx-auto">
                            <p class="mt-2 font-semibold">Scan QR to Pay</p>
                        </div>
                    </div>
                    <div id="card-details" class="payment-details" style="display: none;">
                        <div class="form-group">
                            <label for="card-number">Card Number</label>
                            <input type="text" id="card-number" placeholder="0000 0000 0000 0000" maxlength="19">
                        </div>
                        <div class="card-details-row">
                            <div class="form-group w-full">
                                <label for="expiry-date">Expiry Date</label>
                                <input type="text" id="expiry-date" placeholder="MM/YY" maxlength="5">
                            </div>
                            <div class="form-group w-full">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123" maxlength="4">
                            </div>
                        </div>
                    </div>
                    <div id="cod-details" class="payment-details" style="display: none;">
                        <p class="text-center text-lg">You can pay in cash to the delivery agent upon receiving your order.</p>
                    </div>
                </div>
            </section>

            <!-- Right Side: Order Summary -->
            <aside class="summary-section">
                <h2>Order Summary</h2>
                <div id="summary-items">
                    <!-- Items will be loaded here by JS -->
                </div>
                <div class="summary-item mt-4 pt-4 border-t border-gray-200">
                    <span>Subtotal</span>
                    <span id="summary-subtotal">₹0.00</span>
                </div>
                <div class="summary-item">
                    <span>Delivery Fee</span>
                    <span id="summary-delivery">₹0.00</span>
                </div>
                <div class="summary-total">
                    <span>Total Amount</span>
                    <span id="summary-total">₹0.00</span>
                </div>
                <button id="pay-btn" class="btn btn-primary">Pay Now</button>
            </aside>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container copyright">
            &copy; 2025 LocalConnect 24x7. All Rights Reserved.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const paymentMethods = document.querySelectorAll('.payment-method');
            const detailsPanes = {
                upi: document.getElementById('upi-details'),
                card: document.getElementById('card-details'),
                cod: document.getElementById('cod-details')
            };
            const payBtn = document.getElementById('pay-btn');
            
            // --- Payment Method Selection Logic ---
            let selectedMethod = 'upi';
            paymentMethods.forEach(method => {
                method.addEventListener('click', () => {
                    paymentMethods.forEach(m => m.classList.remove('active'));
                    method.classList.add('active');
                    selectedMethod = method.dataset.method;
                    
                    Object.values(detailsPanes).forEach(pane => pane.style.display = 'none');
                    detailsPanes[selectedMethod].style.display = 'block';

                    payBtn.textContent = selectedMethod === 'cod' ? 'Place Order' : 'Pay Now';
                });
            });

            // --- Load Cart and Update Summary ---
            const summaryItemsEl = document.getElementById('summary-items');
            const subtotalEl = document.getElementById('summary-subtotal');
            const deliveryEl = document.getElementById('summary-delivery');
            const totalEl = document.getElementById('summary-total');
            const DELIVERY_CHARGE = 30.00;

            function loadSummary() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                summaryItemsEl.innerHTML = '';
                let subtotal = 0;

                if (cart.length === 0) {
                    summaryItemsEl.innerHTML = '<p>Your cart is empty.</p>';
                    payBtn.disabled = true;
                } else {
                    cart.forEach(item => {
                        subtotal += item.price * item.qty;
                        const itemEl = document.createElement('div');
                        itemEl.className = 'summary-item text-sm';
                        itemEl.innerHTML = `<span>${item.name} (x${item.qty})</span> <span>₹${(item.price * item.qty).toFixed(2)}</span>`;
                        summaryItemsEl.appendChild(itemEl);
                    });
                }

                const total = cart.length > 0 ? subtotal + DELIVERY_CHARGE : 0;
                subtotalEl.textContent = `₹${subtotal.toFixed(2)}`;
                deliveryEl.textContent = cart.length > 0 ? `₹${DELIVERY_CHARGE.toFixed(2)}` : '₹0.00';
                totalEl.textContent = `₹${total.toFixed(2)}`;
            }

            // --- Payment Form Validation and Simulation ---
            payBtn.addEventListener('click', () => {
                let isValid = true;
                if (selectedMethod === 'upi') {
                    const upiId = document.getElementById('upi-id').value;
                    if (!upiId.includes('@')) {
                        alert('Please enter a valid UPI ID.');
                        isValid = false;
                    }
                } else if (selectedMethod === 'card') {
                    const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
                    const expiry = document.getElementById('expiry-date').value;
                    const cvv = document.getElementById('cvv').value;
                    if (cardNumber.length < 16 || expiry.length < 5 || cvv.length < 3) {
                        alert('Please fill in all card details correctly.');
                        isValid = false;
                    }
                }

                if (isValid) {
                    payBtn.disabled = true;
                    payBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';

                    setTimeout(() => {
                        alert('Payment Successful! Your order has been placed.');
                        localStorage.removeItem('cart'); // Clear the cart
                        window.location.href = 'index.html'; // Redirect to home
                    }, 2000);
                }
            });
            
            // --- Input Formatting for Card Details ---
            document.getElementById('card-number').addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/[^\d]/g, '').replace(/(.{4})/g, '$1 ').trim();
            });
             document.getElementById('expiry-date').addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/[^\d]/g, '').replace(/(.{2})/, '$1/').trim().slice(0,5);
            });

            // --- Initial Load ---
            loadSummary();
        });
    </script>
</body>
</html>